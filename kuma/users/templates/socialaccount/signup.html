{% extends "socialaccount/base.html" %}
{% from "includes/error_list.html" import errorlist %}
{% from 'includes/common_macros.html' import newsletter_widget %}

{% set title = _('Signup') %}

{% set classes = 'register' %}

{% block site_css %}
    {{ super() }}
    {{ css('newsletter') }}
    {{ css('submission') }}
{% endblock %}

{% block site_js %}
    {{ super() }}
    {{ js('newsletter',) }}
{% endblock %}

{% block content %}
<section id="content">
  <div class="wrap">
    <section id="content-main" role="main">
      <article id="browser_register" class="main">

        {% if account.get_provider().id == 'persona' %}
        <div id="persona-explanation">
          <h1>{{ _('Persona is here!') }}</h1>
          <p>{% trans browserid_href='https://persona.org/', why_browserid='http://identity.mozilla.com/post/12950196039/deploying-browserid-at-mozilla' %}
          MDN has switched to <a href="{{ browserid_href }}" rel="external">Persona</a>,
          a safe and simple way to sign in with just your e-mail address. <a href="{{ why_browserid }}" rel="external">Learn more about it.</a>
          {% endtrans %}</p>
          <p>
          {% trans bug_href='https://bugzilla.mozilla.org/enter_bug.cgi?format=__standard__&product=Mozilla%20Developer%20Network&component=Login' %}
          <strong>Having trouble logging in? <a href="{{ bug_href }}" rel="external">Let us know.</a></strong>
          {% endtrans %}
          </p>
        </div>
        {% endif %}

        <form id="create_user" class="boxed submission" method="post" action="{{ url('socialaccount_signup') }}">
          <h2>{{ _('New MDN Members') }}</h2>
          <p>{% trans provider_name=account.get_provider().name %}
            We couldn't find an MDN profile for your {{ provider_name }} account.
            If you're new here, you can pick an MDN username now and complete your
            registration.
          {% endtrans %}</p>
          <p>{% trans %}
            You can access everything on the MDN website even without an account,
            but when you join you'll be able to edit docs, submit demos, and have
            your own profile page.
          {% endtrans %}</p>
          {{ errorlist(form) }}

          {{ csrf() }}
          {% if redirect_field_value %}
          <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
          {% endif %}
          <fieldset>
            <ul>
              <li>
                <label for="id_username">{{ form.username.label }}</label>
                {{ form.username|safe }}
                <p class="field-explanation"><small>{{ _("Please enter the name you'd like to display to other users to identify your contributions.") }}</small></p>
              </li>

              <li>
                <label for="id_email">{{ form.email.label }}</label>
                {{ form.email|safe }}
                <p class="field-explanation"><small>{{ _("Please enter the email you'd like to add to your account") }}</small></p>
              </li>

              {{ newsletter_widget(form) }}

              <li class="submit">
                <button type="submit" name="create">{{ _('Create a New Profile') }}</button>
              </li>
            </ul>
          </fieldset>
        </form>
      </article>
    </section>
  </div>
</section>
{% endblock %}
